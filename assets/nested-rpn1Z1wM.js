var B=(e,s,t)=>{if(!s.has(e))throw TypeError("Cannot "+t)};var L=(e,s,t)=>(B(e,s,"read from private field"),t?t.call(e):s.get(e)),r=(e,s,t)=>{if(s.has(e))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(e):s.set(e,t)},T=(e,s,t,i)=>(B(e,s,"write to private field"),i?i.call(e,t):s.set(e,t),t);var n=(e,s,t)=>(B(e,s,"access private method"),t);import{F as M,a as P,b as q,r as A}from"./removeContentLoader-BW0TZrRx.js";const o={genresTypesList:document.querySelector(".genres__list"),genresMoviesBlock:document.querySelector(".genres__movies"),headerGenresLink:document.querySelector(".header-nav__link__genres"),scrollToTopBtn:document.querySelector(".genres-btn-up"),BtnTopProgressLine:document.querySelector(".genres-btn-up__line")};window.onscroll=S;o.scrollToTopBtn.addEventListener("click",H);function S(){if(N()){x(),G();return}j()}function H(){window.scrollTo({top:0,behavior:"smooth"})}function G(){const e=D();o.BtnTopProgressLine.style.strokeDasharray=`${e}, 100`}function N(){return document.body.scrollTop>100||document.documentElement.scrollTop>100}function x(){o.scrollToTopBtn.style.display="block"}function j(){o.scrollToTopBtn.style.display="none"}function D(){const{scrollTop:e,scrollHeight:s,clientHeight:t}=document.documentElement,i=e||document.body.scrollTop,C=s-t;return i/C*100}function $(){o.headerGenresLink.setAttribute("active","")}var a,m,k,g,I,l,v,f,w,d,y,p,F,b,E,c,u;class U extends M{constructor(t){super(t);r(this,m);r(this,g);r(this,l);r(this,f);r(this,d);r(this,p);r(this,b);r(this,c);r(this,a,void 0);this.fatherElement=t,this.btn,this.page=1,this.genresId,this.isNoBtn=!0}async setCardsOnGenres(t){if(!this.isNoBtn&&this.btn?n(this,l,v).call(this):this.isNoBtn=!1,this.setGenresId(t),n(this,m,k).call(this))return;this.listCardsEl.innerHTML="",this.resetPage(),await this.setCardsOfFilms()!=="error"&&n(this,g,I).call(this)}async setCardsOfFilms(){this.nextPage(),(this.page!==1||n(this,c,u).call(this))&&(n(this,f,w).call(this),n(this,p,F).call(this));const t=await super.setCardsOfFilms(P,{genreId:this.genresId,page:this.page});return n(this,c,u).call(this)&&(n(this,l,v).call(this),this.isNoBtn=!0),this.page!==1&&!n(this,c,u).call(this)&&(n(this,d,y).call(this),n(this,b,E).call(this)),G(),t}setGenresId(t){const i=t.dataset.genresId;T(this,a,this.genresId),this.genresId=i}nextPage(){this.page+=1}resetPage(){this.page=0}}a=new WeakMap,m=new WeakSet,k=function(){return L(this,a)===this.genresId},g=new WeakSet,I=function(){this.fatherElement.insertAdjacentHTML("beforeend",'<button class="genres__bth-more">More movies</button>'),this.btn=document.querySelector(".genres__bth-more"),n(this,d,y).call(this)},l=new WeakSet,v=function(){this.btn.remove()},f=new WeakSet,w=function(){this.btn.removeEventListener("click",_)},d=new WeakSet,y=function(){this.btn.addEventListener("click",_)},p=new WeakSet,F=function(){this.btn.insertAdjacentHTML("beforeend",z())},b=new WeakSet,E=function(){this.btn.querySelector(".btnMoreLoader").remove()},c=new WeakSet,u=function(){return this.page*20>=this.max_films};function z(){return'<div class="btnMoreLoader"></div>'}let O=new U(o.genresMoviesBlock);function J(e){const s=e.target.closest(".genres__item");s&&(O.setCardsOnGenres(s),K(s))}let h="";function K(e){h!==e&&(h&&h.removeAttribute("active"),h=e,e.setAttribute("active",""))}function _(){O.setCardsOfFilms()}async function Q(){const t=(await q()).genres.map(i=>R(i));o.genresTypesList.innerHTML=t.join("")}function R(e){const{id:s,name:t}=e;return`<li class="genres__item" data-genres-id="${s}">
            <button class="genres-item__btn">${t}</button>
          </li>
  `}$();await Q();o.genresTypesList.addEventListener("click",J);A();
