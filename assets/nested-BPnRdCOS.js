var v=(e,s,t)=>{if(!s.has(e))throw TypeError("Cannot "+t)};var L=(e,s,t)=>(v(e,s,"read from private field"),t?t.call(e):s.get(e)),i=(e,s,t)=>{if(s.has(e))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(e):s.set(e,t)},w=(e,s,t,o)=>(v(e,s,"write to private field"),o?o.call(e,t):s.set(e,t),t);var n=(e,s,t)=>(v(e,s,"access private method"),t);import{S,F as O,a as C,b as M}from"./swiper-bundle-t_bLrQZw.js";const r={genresTypesList:document.querySelector(".genres__list"),genresMoviesBlock:document.querySelector(".genres__movies"),headerGenresLink:document.querySelector(".header-nav__link__genres"),scrollToTopBtn:document.querySelector(".genres__btn-up")};window.onscroll=A;r.scrollToTopBtn.addEventListener("click",H);function A(){if(q()){r.scrollToTopBtn.style.display="block";return}r.scrollToTopBtn.style.display="none"}function H(){window.scrollTo({top:0,behavior:"smooth"})}function q(){return document.body.scrollTop>100||document.documentElement.scrollTop>100}new S(".swiper",{touchRation:.3,grabCursor:!0,mousewheel:{sensitivity:.35,eventsTarget:".swiper"},initialSlide:2,centeredSlides:!0,speed:5e3,slidesPerView:5,slidesPerGroup:1,direction:"vertical",freeMode:!0});function x(){r.headerGenresLink.setAttribute("active","")}var a,g,_,m,G,c,b,p,E,d,T,f,k,y,I,l,u;class P extends O{constructor(t){super(t);i(this,g);i(this,m);i(this,c);i(this,p);i(this,d);i(this,f);i(this,y);i(this,l);i(this,a,void 0);this.fatherElement=t,this.btn,this.page=1,this.genresId,this.isNoBtn=!0}async setCardsOnGenres(t){this.isNoBtn?this.isNoBtn=!1:n(this,c,b).call(this),this.setGenresId(t),!n(this,g,_).call(this)&&(this.listCardsEl.innerHTML="",this.resetPage(),await this.setCardsOfFilms(),n(this,m,G).call(this))}async setCardsOfFilms(){this.nextPage(),(this.page!==1||n(this,l,u).call(this))&&(n(this,p,E).call(this),n(this,f,k).call(this)),await super.setCardsOfFilms(C,{genreId:this.genresId,page:this.page}),n(this,l,u).call(this)&&(n(this,c,b).call(this),this.isNoBtn=!0),this.page!==1&&!n(this,l,u).call(this)&&(n(this,d,T).call(this),n(this,y,I).call(this))}setGenresId(t){const o=t.dataset.genresId;w(this,a,this.genresId),this.genresId=o}nextPage(){this.page+=1}resetPage(){this.page=0}}a=new WeakMap,g=new WeakSet,_=function(){return L(this,a)===this.genresId},m=new WeakSet,G=function(){this.fatherElement.insertAdjacentHTML("beforeend",'<button class="genres__bth-more">More movies</button>'),this.btn=document.querySelector(".genres__bth-more"),n(this,d,T).call(this)},c=new WeakSet,b=function(){this.btn.remove()},p=new WeakSet,E=function(){this.btn.removeEventListener("click",B)},d=new WeakSet,T=function(){this.btn.addEventListener("click",B)},f=new WeakSet,k=function(){this.btn.insertAdjacentHTML("beforeend",N())},y=new WeakSet,I=function(){this.btn.querySelector(".loader").remove()},l=new WeakSet,u=function(){return this.page*20>=this.max_films};function N(){return'<div class="loader"></div>'}let F=new P(r.genresMoviesBlock);function $(e){const s=e.target.closest(".genres__item");s&&(F.setCardsOnGenres(s),j(s))}let h="";function j(e){h!==e&&(h&&h.removeAttribute("active"),h=e,e.setAttribute("active",""))}function B(){F.setCardsOfFilms()}async function Y(){const t=(await M()).genres.map(o=>R(o));r.genresTypesList.innerHTML=t.join("")}function R(e){const{id:s,name:t}=e;return`<li class="genres__item swiper-slide" data-genres-id="${s}">
            <button class="genres-item__btn">${t}</button>
          </li>
  `}function U(){const e=window.scrollY,t=r.genresTypesList.scrollHeight-window.innerHeight+75;e<t?r.genresTypesList.style.transform=`translateY(-${e}px)`:r.genresTypesList.style.transform=`translateY(-${t}px)`}x();Y();window.addEventListener("scroll",U);r.genresTypesList.addEventListener("click",$);
