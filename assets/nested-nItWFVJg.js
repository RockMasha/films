var x=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var n=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)};var r=(t,e,s)=>(x(t,e,"access private method"),s);import{c as j,a as N,b as D,r as $}from"./removeContentLoader-CJjuKDY5.js";const i={genresTypesList:document.querySelector(".genres__list"),genresMoviesBlock:document.querySelector(".genres__movies"),headerGenresLink:document.querySelector(".header-nav__link__genres"),scrollToTopBtn:document.querySelector(".genres-btn-up"),BtnTopProgressLine:document.querySelector(".genres-btn-up__line")};window.onscroll=U;i.scrollToTopBtn.addEventListener("click",z);function U(){if(J()){K(),E();return}Q()}function z(){window.scrollTo({top:0,behavior:"smooth"})}function E(){const t=R();i.BtnTopProgressLine.style.strokeDasharray=`${t}, 100`}function J(){return document.body.scrollTop>100||document.documentElement.scrollTop>100}function K(){i.scrollToTopBtn.style.display="block"}function Q(){i.scrollToTopBtn.style.display="none"}function R(){const{scrollTop:t,scrollHeight:e,clientHeight:s}=document.documentElement,a=t||document.body.scrollTop,T=e-s;return a/T*100}function V(){i.headerGenresLink.setAttribute("active","")}var u,k,m,M,f,w,g,F,c,_,p,I,l,C,b,O,v,S,L,q,B,A,y,P,o,h;class W{constructor(e){n(this,u);n(this,m);n(this,f);n(this,g);n(this,c);n(this,p);n(this,l);n(this,b);n(this,v);n(this,L);n(this,B);n(this,y);n(this,o);this.listCardsEl=e.querySelector(".cards-list"),this.fatherElement=e,this.btn,this.genresId,this.page=1,this.max_films,this.isNoBtn=!0}async setCardsOnGenres(e){if(r(this,u,k).call(this,e))return;r(this,y,P).call(this)||r(this,L,q).call(this),!this.isNoBtn&&this.btn?r(this,c,_).call(this):this.isNoBtn=!1,this.setGenresId(e),this.listCardsEl.innerHTML="",this.resetPage();const s=await this.setCardsOfFilms();s!=="error"&&r(this,g,F).call(this),s!=="error"&&r(this,B,A).call(this)}async setCardsOfFilms(){this.nextPage(),(this.page!==1||r(this,o,h).call(this))&&(r(this,p,I).call(this),r(this,b,O).call(this));let e;try{const s=await j(N,{genreId:this.genresId,page:this.page}),{cards:a,maxFilms:T}=s;r(this,m,M).call(this,a.join("")),r(this,f,w).call(this,T)}catch{e="error"}return r(this,o,h).call(this)&&(r(this,c,_).call(this),this.isNoBtn=!0),this.page!==1&&!r(this,o,h).call(this)&&(r(this,l,C).call(this),r(this,v,S).call(this)),E(),e==="error"?e:"ok"}setGenresId(e){this.genresId=e}nextPage(){this.page+=1}resetPage(){this.page=0}}u=new WeakSet,k=function(e){return this.genresId===e},m=new WeakSet,M=function(e){this.listCardsEl.insertAdjacentHTML("beforeend",e)},f=new WeakSet,w=function(e){this.max_films=e},g=new WeakSet,F=function(){this.fatherElement.insertAdjacentHTML("beforeend",'<button class="genres__bth-more">More movies</button>'),this.btn=document.querySelector(".genres__bth-more"),r(this,l,C).call(this)},c=new WeakSet,_=function(){this.btn.remove()},p=new WeakSet,I=function(){this.btn.removeEventListener("click",G)},l=new WeakSet,C=function(){this.btn.addEventListener("click",G)},b=new WeakSet,O=function(){this.btn.insertAdjacentHTML("beforeend",X())},v=new WeakSet,S=function(){this.btn.querySelector(".btnMoreLoader").remove()},L=new WeakSet,q=function(){this.fatherElement.insertAdjacentHTML("beforeend",Y())},B=new WeakSet,A=function(){this.fatherElement.querySelector(".genresCard-loader").remove()},y=new WeakSet,P=function(){return!!this.fatherElement.querySelector(".genresCard-loader")},o=new WeakSet,h=function(){return this.page*20>=this.max_films};function X(){return'<div class="btnMoreLoader"></div>'}function Y(){return'<div class="genresCard-loader"></div>'}let H=new W(i.genresMoviesBlock);function Z(t){const e=t.target.closest(".genres__item");if(!e)return;const s=te(e);H.setCardsOnGenres(s),ee(e)}let d="";function ee(t){d!==t&&(d&&d.removeAttribute("active"),d=t,t.setAttribute("active",""))}function te(t){return t.dataset.genresId}function G(){H.setCardsOfFilms()}async function se(){const s=(await D()).genres.map(a=>re(a));i.genresTypesList.innerHTML=s.join("")}function re(t){const{id:e,name:s}=t;return`<li class="genres__item" data-genres-id="${e}">
            <button class="genres-item__btn">${s}</button>
          </li>
  `}V();await se();i.genresTypesList.addEventListener("click",Z);$();
