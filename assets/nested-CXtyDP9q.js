var C=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var G=(t,e,s)=>(C(t,e,"read from private field"),s?s.call(t):e.get(t)),n=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},w=(t,e,s,i)=>(C(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);var r=(t,e,s)=>(C(t,e,"access private method"),s);import{c as N,a as D,b as $,r as U}from"./removeContentLoader-CJjuKDY5.js";const o={genresTypesList:document.querySelector(".genres__list"),genresMoviesBlock:document.querySelector(".genres__movies"),headerGenresLink:document.querySelector(".header-nav__link__genres"),scrollToTopBtn:document.querySelector(".genres-btn-up"),BtnTopProgressLine:document.querySelector(".genres-btn-up__line")};window.onscroll=z;o.scrollToTopBtn.addEventListener("click",J);function z(){if(K()){Q(),M();return}R()}function J(){window.scrollTo({top:0,behavior:"smooth"})}function M(){const t=V();o.BtnTopProgressLine.style.strokeDasharray=`${t}, 100`}function K(){return document.body.scrollTop>100||document.documentElement.scrollTop>100}function Q(){o.scrollToTopBtn.style.display="block"}function R(){o.scrollToTopBtn.style.display="none"}function V(){const{scrollTop:t,scrollHeight:e,clientHeight:s}=document.documentElement,i=t||document.body.scrollTop,_=e-s;return i/_*100}function W(){o.headerGenresLink.setAttribute("active","")}var a,m,F,g,I,f,O,b,S,c,E,p,q,d,k,v,A,L,P,B,H,y,x,T,j,l,u;class X{constructor(e){n(this,m);n(this,g);n(this,f);n(this,b);n(this,c);n(this,p);n(this,d);n(this,v);n(this,L);n(this,B);n(this,y);n(this,T);n(this,l);n(this,a,void 0);this.listCardsEl=e.querySelector(".cards-list"),this.fatherElement=e,this.btn,this.genresId,this.page=1,this.max_films,this.isNoBtn=!0}async setCardsOnGenres(e){if(r(this,m,F).call(this,e))return;r(this,T,j).call(this)||r(this,B,H).call(this),!this.isNoBtn&&this.btn?r(this,c,E).call(this):this.isNoBtn=!1,this.setGenresId(e),this.listCardsEl.innerHTML="",this.resetPage(),await this.setCardsOfFilms()!=="error"&&(r(this,b,S).call(this),r(this,y,x).call(this))}async setCardsOfFilms(){this.nextPage(),(this.page!==1||r(this,l,u).call(this))&&(r(this,p,q).call(this),r(this,v,A).call(this));let e;try{const s=await N(D,{genreId:this.genresId,page:this.page}),{cards:i,maxFilms:_}=s;r(this,g,I).call(this,i.join("")),r(this,f,O).call(this,_)}catch{e="error"}return r(this,l,u).call(this)&&(r(this,c,E).call(this),this.isNoBtn=!0),this.page!==1&&!r(this,l,u).call(this)&&(r(this,d,k).call(this),r(this,L,P).call(this)),M(),e==="error"?e:"ok"}setGenresId(e){this.genresId=e}nextPage(){this.page+=1}resetPage(){this.page=0}}a=new WeakMap,m=new WeakSet,F=function(e){return this.genresId===e},g=new WeakSet,I=function(e){this.listCardsEl.insertAdjacentHTML("beforeend",e)},f=new WeakSet,O=function(e){this.max_films=e},b=new WeakSet,S=function(){this.fatherElement.insertAdjacentHTML("beforeend",'<button class="genres__bth-more">More movies</button>'),this.btn=document.querySelector(".genres__bth-more"),r(this,d,k).call(this)},c=new WeakSet,E=function(){this.btn.remove()},p=new WeakSet,q=function(){this.btn.removeEventListener("click",G(this,a))},d=new WeakSet,k=function(){w(this,a,this.setCardsOfFilms.bind(this)),this.btn.addEventListener("click",G(this,a))},v=new WeakSet,A=function(){this.btn.insertAdjacentHTML("beforeend",Y())},L=new WeakSet,P=function(){this.btn.querySelector(".btnMoreLoader").remove()},B=new WeakSet,H=function(){this.fatherElement.insertAdjacentHTML("beforeend",Z())},y=new WeakSet,x=function(){this.fatherElement.querySelector(".genresCard-loader").remove()},T=new WeakSet,j=function(){return!!this.fatherElement.querySelector(".genresCard-loader")},l=new WeakSet,u=function(){return this.page*20>=this.max_films};function Y(){return'<div class="btnMoreLoader"></div>'}function Z(){return'<div class="genresCard-loader"></div>'}let ee=new X(o.genresMoviesBlock);function te(t){const e=t.target.closest(".genres__item");if(!e)return;const s=re(e);ee.setCardsOnGenres(s),se(e)}let h=null;function se(t){h!==t&&(h&&h.removeAttribute("active"),h=t,t.setAttribute("active",""))}function re(t){return t.dataset.genresId}async function ne(){const s=(await $()).genres.map(i=>ie(i));o.genresTypesList.innerHTML=s.join("")}function ie(t){const{id:e,name:s}=t;return`<li class="genres__item" data-genres-id="${e}">
            <button class="genres-item__btn">${s}</button>
          </li>
  `}W();await ne();o.genresTypesList.addEventListener("click",te);U();
